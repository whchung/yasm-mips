\hypertarget{structyasm__bytecode__callback}{\section{yasm\-\_\-bytecode\-\_\-callback Struct Reference}
\label{structyasm__bytecode__callback}\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}}
}


{\ttfamily \#include $<$bytecode.\-h$>$}

\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20}{yasm\-\_\-bytecode\-\_\-special\-\_\-type} \{ {\bfseries Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-N\-O\-N\-E} = 0, 
\hyperlink{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20a48311d85beeff571a70ae80c1932c01b}{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-R\-E\-S\-E\-R\-V\-E}, 
\hyperlink{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20a054b54d69dcf78ccaf83c27cafa37132}{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-O\-F\-F\-S\-E\-T}, 
\hyperlink{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20a94aea3a71f96763041fc6f6f4b5fe45b}{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-I\-N\-S\-N}
 \}
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
void($\ast$ \hyperlink{structyasm__bytecode__callback_a4b1278cc8a4f20155552b794ab2fa7bf}{destroy} )(void $\ast$contents)
\item 
void($\ast$ \hyperlink{structyasm__bytecode__callback_a92d8048fa7a95b081f55411476709610}{print} )(const void $\ast$contents, F\-I\-L\-E $\ast$f, int indent\-\_\-level)
\item 
void($\ast$ \hyperlink{structyasm__bytecode__callback_a4cad5ebebb2abab4df507a2f8bc0e0a2}{finalize} )(\hyperlink{structyasm__bytecode}{yasm\-\_\-bytecode} $\ast$bc, \hyperlink{structyasm__bytecode}{yasm\-\_\-bytecode} $\ast$prev\-\_\-bc)
\item 
int($\ast$ \hyperlink{structyasm__bytecode__callback_a3fe73001c0b8ff617e801c2b7720d75a}{elem\-\_\-size} )(\hyperlink{structyasm__bytecode}{yasm\-\_\-bytecode} $\ast$bc)
\item 
int($\ast$ \hyperlink{structyasm__bytecode__callback_a8bf7bcf915f32d4e02a729a0ca5bd156}{calc\-\_\-len} )(\hyperlink{structyasm__bytecode}{yasm\-\_\-bytecode} $\ast$bc, \hyperlink{bytecode_8h_a911868d562d60ee4fdddc07c1799f8db}{yasm\-\_\-bc\-\_\-add\-\_\-span\-\_\-func} add\-\_\-span, void $\ast$add\-\_\-span\-\_\-data)
\item 
int($\ast$ \hyperlink{structyasm__bytecode__callback_a4763a7d0da44fef003397632b0051458}{expand} )(\hyperlink{structyasm__bytecode}{yasm\-\_\-bytecode} $\ast$bc, int span, long old\-\_\-val, long new\-\_\-val, long $\ast$neg\-\_\-thres, long $\ast$pos\-\_\-thres)
\item 
int($\ast$ \hyperlink{structyasm__bytecode__callback_af5ab5f920fece2d85ce2f7635844638e}{tobytes} )(\hyperlink{structyasm__bytecode}{yasm\-\_\-bytecode} $\ast$bc, unsigned char $\ast$$\ast$bufp, unsigned char $\ast$bufstart, void $\ast$d, \hyperlink{coretype_8h_aa826d76bab04c68a929446c75b8ddfe2}{yasm\-\_\-output\-\_\-value\-\_\-func} output\-\_\-value, \hyperlink{coretype_8h_a442d0350d9968d01d694bf35bbdd0e2f}{yasm\-\_\-output\-\_\-reloc\-\_\-func} output\-\_\-reloc)
\item 
\hypertarget{structyasm__bytecode__callback_a47445f04336e2dee9e494c86f482d5c4}{enum \\*
\hyperlink{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20}{yasm\-\_\-bytecode\-\_\-callback\-::yasm\-\_\-bytecode\-\_\-special\-\_\-type} {\bfseries special}}\label{structyasm__bytecode__callback_a47445f04336e2dee9e494c86f482d5c4}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Bytecode callback structure. Any implementation of a specific bytecode must implement these functions and this callback structure. The bytecode implementation-\/specific data is stored in \hyperlink{structyasm__bytecode_a00b5eeb6ac2908972964ec3daef631c1}{yasm\-\_\-bytecode.\-contents}. 

\subsection{Member Enumeration Documentation}
\hypertarget{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20}{\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!yasm\-\_\-bytecode\-\_\-special\-\_\-type@{yasm\-\_\-bytecode\-\_\-special\-\_\-type}}
\index{yasm\-\_\-bytecode\-\_\-special\-\_\-type@{yasm\-\_\-bytecode\-\_\-special\-\_\-type}!yasm_bytecode_callback@{yasm\-\_\-bytecode\-\_\-callback}}
\subsubsection[{yasm\-\_\-bytecode\-\_\-special\-\_\-type}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf yasm\-\_\-bytecode\-\_\-callback\-::yasm\-\_\-bytecode\-\_\-special\-\_\-type}}}\label{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20}
Special bytecode classifications. Most bytecode types should use \#\-Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-N\-O\-N\-E. Others cause special handling to kick in in various parts of yasm. \begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-R\-E\-S\-E\-R\-V\-E@{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-R\-E\-S\-E\-R\-V\-E}!yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}}\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-R\-E\-S\-E\-R\-V\-E@{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-R\-E\-S\-E\-R\-V\-E}}\item[{\em 
\hypertarget{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20a48311d85beeff571a70ae80c1932c01b}{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-R\-E\-S\-E\-R\-V\-E}\label{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20a48311d85beeff571a70ae80c1932c01b}
}]Bytecode reserves space instead of outputting data. \index{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-O\-F\-F\-S\-E\-T@{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-O\-F\-F\-S\-E\-T}!yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}}\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-O\-F\-F\-S\-E\-T@{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-O\-F\-F\-S\-E\-T}}\item[{\em 
\hypertarget{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20a054b54d69dcf78ccaf83c27cafa37132}{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-O\-F\-F\-S\-E\-T}\label{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20a054b54d69dcf78ccaf83c27cafa37132}
}]Adjusts offset instead of calculating len. \index{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-I\-N\-S\-N@{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-I\-N\-S\-N}!yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}}\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-I\-N\-S\-N@{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-I\-N\-S\-N}}\item[{\em 
\hypertarget{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20a94aea3a71f96763041fc6f6f4b5fe45b}{Y\-A\-S\-M\-\_\-\-B\-C\-\_\-\-S\-P\-E\-C\-I\-A\-L\-\_\-\-I\-N\-S\-N}\label{structyasm__bytecode__callback_a872481e79c8510c5b8559f74599b4e20a94aea3a71f96763041fc6f6f4b5fe45b}
}]Instruction bytecode. \end{description}
\end{Desc}


\subsection{Member Data Documentation}
\hypertarget{structyasm__bytecode__callback_a8bf7bcf915f32d4e02a729a0ca5bd156}{\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!calc\-\_\-len@{calc\-\_\-len}}
\index{calc\-\_\-len@{calc\-\_\-len}!yasm_bytecode_callback@{yasm\-\_\-bytecode\-\_\-callback}}
\subsubsection[{calc\-\_\-len}]{\setlength{\rightskip}{0pt plus 5cm}int($\ast$ yasm\-\_\-bytecode\-\_\-callback\-::calc\-\_\-len)({\bf yasm\-\_\-bytecode} $\ast$bc, {\bf yasm\-\_\-bc\-\_\-add\-\_\-span\-\_\-func} add\-\_\-span, void $\ast$add\-\_\-span\-\_\-data)}}\label{structyasm__bytecode__callback_a8bf7bcf915f32d4e02a729a0ca5bd156}
Calculates the minimum size of a bytecode. Called from \hyperlink{bytecode_8h_ae1193a627ea3a3b127c8953791bb68a9}{yasm\-\_\-bc\-\_\-calc\-\_\-len()}. A generic fill-\/in for this is \hyperlink{bytecode_8h_acfbeea52e017aff1fd67662a1a3577ad}{yasm\-\_\-bc\-\_\-calc\-\_\-len\-\_\-common()}, but as this function internal errors when called, be very careful when using it! This function should simply add to bc-\/$>$len and not set it directly (it's initialized by \hyperlink{bytecode_8h_ae1193a627ea3a3b127c8953791bb68a9}{yasm\-\_\-bc\-\_\-calc\-\_\-len()} prior to passing control to this function).


\begin{DoxyParams}{Parameters}
{\em bc} & bytecode \\
\hline
{\em add\-\_\-span} & function to call to add a span \\
\hline
{\em add\-\_\-span\-\_\-data} & extra data to be passed to add\-\_\-span function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if no error occurred, nonzero if there was an error recognized (and output) during execution. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
May store to bytecode updated expressions. 
\end{DoxyNote}
\hypertarget{structyasm__bytecode__callback_a4b1278cc8a4f20155552b794ab2fa7bf}{\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!destroy@{destroy}}
\index{destroy@{destroy}!yasm_bytecode_callback@{yasm\-\_\-bytecode\-\_\-callback}}
\subsubsection[{destroy}]{\setlength{\rightskip}{0pt plus 5cm}void($\ast$ yasm\-\_\-bytecode\-\_\-callback\-::destroy)(void $\ast$contents)}}\label{structyasm__bytecode__callback_a4b1278cc8a4f20155552b794ab2fa7bf}
Destroys the implementation-\/specific data. Called from \hyperlink{bytecode_8h_aff895602e22b16f456ad06c2a81752f0}{yasm\-\_\-bc\-\_\-destroy()}. 
\begin{DoxyParams}{Parameters}
{\em contents} & \hyperlink{structyasm__bytecode_a00b5eeb6ac2908972964ec3daef631c1}{yasm\-\_\-bytecode.\-contents} \\
\hline
\end{DoxyParams}
\hypertarget{structyasm__bytecode__callback_a3fe73001c0b8ff617e801c2b7720d75a}{\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!elem\-\_\-size@{elem\-\_\-size}}
\index{elem\-\_\-size@{elem\-\_\-size}!yasm_bytecode_callback@{yasm\-\_\-bytecode\-\_\-callback}}
\subsubsection[{elem\-\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}int($\ast$ yasm\-\_\-bytecode\-\_\-callback\-::elem\-\_\-size)({\bf yasm\-\_\-bytecode} $\ast$bc)}}\label{structyasm__bytecode__callback_a3fe73001c0b8ff617e801c2b7720d75a}
Return elements size of a data bytecode. This function should return the size of each elements of a data bytecode, for proper dereference of symbols attached to it. 
\begin{DoxyParams}{Parameters}
{\em bc} & bytecode \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if element size is unknown. 
\end{DoxyReturn}
\hypertarget{structyasm__bytecode__callback_a4763a7d0da44fef003397632b0051458}{\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!expand@{expand}}
\index{expand@{expand}!yasm_bytecode_callback@{yasm\-\_\-bytecode\-\_\-callback}}
\subsubsection[{expand}]{\setlength{\rightskip}{0pt plus 5cm}int($\ast$ yasm\-\_\-bytecode\-\_\-callback\-::expand)({\bf yasm\-\_\-bytecode} $\ast$bc, int span, long old\-\_\-val, long new\-\_\-val,long $\ast$neg\-\_\-thres,long $\ast$pos\-\_\-thres)}}\label{structyasm__bytecode__callback_a4763a7d0da44fef003397632b0051458}
Recalculates the bytecode's length based on an expanded span length. Called from \hyperlink{bytecode_8h_aae0bdad12f49fcdd19be484c20abfb6a}{yasm\-\_\-bc\-\_\-expand()}. A generic fill-\/in for this is \hyperlink{bytecode_8h_a9a579accd211672dbca0661b4f7038a3}{yasm\-\_\-bc\-\_\-expand\-\_\-common()}, but as this function internal errors when called, if used, ensure that \hyperlink{structyasm__bytecode__callback_a8bf7bcf915f32d4e02a729a0ca5bd156}{calc\-\_\-len()} never adds a span. This function should simply add to bc-\/$>$len to increase the length by a delta amount. 
\begin{DoxyParams}{Parameters}
{\em bc} & bytecode \\
\hline
{\em span} & span I\-D (as given to add\-\_\-span in calc\-\_\-len) \\
\hline
{\em old\-\_\-val} & previous span value \\
\hline
{\em new\-\_\-val} & new span value \\
\hline
{\em neg\-\_\-thres} & negative threshold for long/short decision (returned) \\
\hline
{\em pos\-\_\-thres} & positive threshold for long/short decision (returned) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if bc no longer dependent on this span's length, negative if there was an error recognized (and output) during execution, and positive if bc size may increase for this span further based on the new negative and positive thresholds returned. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
May store to bytecode updated expressions. 
\end{DoxyNote}
\hypertarget{structyasm__bytecode__callback_a4cad5ebebb2abab4df507a2f8bc0e0a2}{\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!finalize@{finalize}}
\index{finalize@{finalize}!yasm_bytecode_callback@{yasm\-\_\-bytecode\-\_\-callback}}
\subsubsection[{finalize}]{\setlength{\rightskip}{0pt plus 5cm}void($\ast$ yasm\-\_\-bytecode\-\_\-callback\-::finalize)({\bf yasm\-\_\-bytecode} $\ast$bc, {\bf yasm\-\_\-bytecode} $\ast$prev\-\_\-bc)}}\label{structyasm__bytecode__callback_a4cad5ebebb2abab4df507a2f8bc0e0a2}
Finalizes the bytecode after parsing. Called from \hyperlink{bytecode_8h_aa2c45590aa983607da0c455131d71892}{yasm\-\_\-bc\-\_\-finalize()}. A generic fill-\/in for this is \hyperlink{bytecode_8h_a33cf5b45d66526bdbaf202155a5de69a}{yasm\-\_\-bc\-\_\-finalize\-\_\-common()}. 
\begin{DoxyParams}{Parameters}
{\em bc} & bytecode \\
\hline
{\em prev\-\_\-bc} & bytecode directly preceding bc \\
\hline
\end{DoxyParams}
\hypertarget{structyasm__bytecode__callback_a92d8048fa7a95b081f55411476709610}{\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!print@{print}}
\index{print@{print}!yasm_bytecode_callback@{yasm\-\_\-bytecode\-\_\-callback}}
\subsubsection[{print}]{\setlength{\rightskip}{0pt plus 5cm}void($\ast$ yasm\-\_\-bytecode\-\_\-callback\-::print)(const void $\ast$contents, F\-I\-L\-E $\ast$f, int indent\-\_\-level)}}\label{structyasm__bytecode__callback_a92d8048fa7a95b081f55411476709610}
Prints the implementation-\/specific data (for debugging purposes). Called from \hyperlink{bytecode_8h_ae86f7e4760a21d0c2b0ee46537dae750}{yasm\-\_\-bc\-\_\-print()}. 
\begin{DoxyParams}{Parameters}
{\em contents} & \hyperlink{structyasm__bytecode_a00b5eeb6ac2908972964ec3daef631c1}{yasm\-\_\-bytecode.\-contents} \\
\hline
{\em f} & file \\
\hline
{\em indent\-\_\-level} & indentation level \\
\hline
\end{DoxyParams}
\hypertarget{structyasm__bytecode__callback_af5ab5f920fece2d85ce2f7635844638e}{\index{yasm\-\_\-bytecode\-\_\-callback@{yasm\-\_\-bytecode\-\_\-callback}!tobytes@{tobytes}}
\index{tobytes@{tobytes}!yasm_bytecode_callback@{yasm\-\_\-bytecode\-\_\-callback}}
\subsubsection[{tobytes}]{\setlength{\rightskip}{0pt plus 5cm}int($\ast$ yasm\-\_\-bytecode\-\_\-callback\-::tobytes)({\bf yasm\-\_\-bytecode} $\ast$bc, unsigned char $\ast$$\ast$bufp, unsigned char $\ast$bufstart, void $\ast$d, {\bf yasm\-\_\-output\-\_\-value\-\_\-func} output\-\_\-value,{\bf yasm\-\_\-output\-\_\-reloc\-\_\-func} output\-\_\-reloc)}}\label{structyasm__bytecode__callback_af5ab5f920fece2d85ce2f7635844638e}
Convert a bytecode into its byte representation. Called from \hyperlink{bytecode_8h_a332b5476c9d9b0d99667a35b201a4c20}{yasm\-\_\-bc\-\_\-tobytes()}. A generic fill-\/in for this is \hyperlink{bytecode_8h_abd8b827a2ce2f0312d001f05e63c8cc1}{yasm\-\_\-bc\-\_\-tobytes\-\_\-common()}, but as this function internal errors when called, be very careful when using it! 
\begin{DoxyParams}{Parameters}
{\em bc} & bytecode \\
\hline
{\em bufp} & byte representation destination buffer; should be incremented as it's written to, so that on return its delta from the passed-\/in buf matches the bytecode length (it's okay not to do this if an error indication is returned) \\
\hline
{\em bufstart} & For calculating the correct offset parameter for the {\itshape output\-\_\-value} calls\-: $\ast$bufp -\/ bufstart. \\
\hline
{\em d} & data to pass to each call to output\-\_\-value/output\-\_\-reloc \\
\hline
{\em output\-\_\-value} & function to call to convert values into their byte representation \\
\hline
{\em output\-\_\-reloc} & function to call to output relocation entries for a single sym \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nonzero on error, 0 on success. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
May result in non-\/reversible changes to the bytecode, but it's preferable if calling this function twice would result in the same output. 
\end{DoxyNote}


The documentation for this struct was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
\hyperlink{bytecode_8h}{bytecode.\-h}\end{DoxyCompactItemize}
