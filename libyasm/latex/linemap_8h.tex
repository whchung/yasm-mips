\hypertarget{linemap_8h}{\section{linemap.\-h File Reference}
\label{linemap_8h}\index{linemap.\-h@{linemap.\-h}}
}


Y\-A\-S\-M virtual line mapping interface.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L \hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$ \hyperlink{linemap_8h_a9b2d9e6a8d03e0aed107d7bcc1cd930d}{yasm\-\_\-linemap\-\_\-create} (void)
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L void \hyperlink{linemap_8h_a60caf1c26ffcf941a30d63eb33f6a2a1}{yasm\-\_\-linemap\-\_\-destroy} (\hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$linemap)
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L unsigned long \hyperlink{linemap_8h_a9cbd772abcbe017d7425bd50098be3f6}{yasm\-\_\-linemap\-\_\-get\-\_\-current} (\hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$linemap)
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L int \hyperlink{linemap_8h_a97a4f3e1d3d2163b46df54431d03bc48}{yasm\-\_\-linemap\-\_\-get\-\_\-source} (\hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$linemap, unsigned long line, \hyperlink{structyasm__bytecode}{yasm\-\_\-bytecode} $\ast$$\ast$bcp, const char $\ast$$\ast$sourcep)
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L void \hyperlink{linemap_8h_a2769d238eadf5f84f6d0355e5833bee7}{yasm\-\_\-linemap\-\_\-add\-\_\-source} (\hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$linemap, \hyperlink{structyasm__bytecode}{yasm\-\_\-bytecode} $\ast$bc, const char $\ast$source)
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L unsigned long \hyperlink{linemap_8h_ac05b99123984059ba161394e966d5161}{yasm\-\_\-linemap\-\_\-goto\-\_\-next} (\hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$linemap)
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L void \hyperlink{linemap_8h_a03b28dbe9e97b4c19e2a75d83eb64852}{yasm\-\_\-linemap\-\_\-set} (\hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$linemap, const char $\ast$filename, unsigned long virtual\-\_\-line, unsigned long file\-\_\-line, unsigned long line\-\_\-inc)
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L unsigned long \hyperlink{linemap_8h_a55692e3a90e56160ea5a8d08c3d015f7}{yasm\-\_\-linemap\-\_\-poke} (\hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$linemap, const char $\ast$filename, unsigned long file\-\_\-line)
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L void \hyperlink{linemap_8h_ace26c1c3b7675376c8420393c84aa697}{yasm\-\_\-linemap\-\_\-lookup} (\hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$linemap, unsigned long line, const char $\ast$$\ast$filename, unsigned long $\ast$file\-\_\-line)
\item 
Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L int \hyperlink{linemap_8h_af626dd51998e21fd4b7e8b057f0c8ee5}{yasm\-\_\-linemap\-\_\-traverse\-\_\-filenames} (\hyperlink{structyasm__linemap}{yasm\-\_\-linemap} $\ast$linemap, void $\ast$d, int($\ast$func)(const char $\ast$filename, void $\ast$d))
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Y\-A\-S\-M virtual line mapping interface. Copyright (C) 2002-\/2007 Peter Johnson

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met\-:
\begin{DoxyEnumerate}
\item Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
\end{DoxyEnumerate}

T\-H\-I\-S S\-O\-F\-T\-W\-A\-R\-E I\-S P\-R\-O\-V\-I\-D\-E\-D B\-Y T\-H\-E A\-U\-T\-H\-O\-R A\-N\-D O\-T\-H\-E\-R C\-O\-N\-T\-R\-I\-B\-U\-T\-O\-R\-S ``\-A\-S I\-S'' A\-N\-D A\-N\-Y E\-X\-P\-R\-E\-S\-S O\-R I\-M\-P\-L\-I\-E\-D W\-A\-R\-R\-A\-N\-T\-I\-E\-S, I\-N\-C\-L\-U\-D\-I\-N\-G, B\-U\-T N\-O\-T L\-I\-M\-I\-T\-E\-D T\-O, T\-H\-E I\-M\-P\-L\-I\-E\-D W\-A\-R\-R\-A\-N\-T\-I\-E\-S O\-F M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y A\-N\-D F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E A\-R\-E D\-I\-S\-C\-L\-A\-I\-M\-E\-D. I\-N N\-O E\-V\-E\-N\-T S\-H\-A\-L\-L T\-H\-E A\-U\-T\-H\-O\-R O\-R O\-T\-H\-E\-R C\-O\-N\-T\-R\-I\-B\-U\-T\-O\-R\-S B\-E L\-I\-A\-B\-L\-E F\-O\-R A\-N\-Y D\-I\-R\-E\-C\-T, I\-N\-D\-I\-R\-E\-C\-T, I\-N\-C\-I\-D\-E\-N\-T\-A\-L, S\-P\-E\-C\-I\-A\-L, E\-X\-E\-M\-P\-L\-A\-R\-Y, O\-R C\-O\-N\-S\-E\-Q\-U\-E\-N\-T\-I\-A\-L D\-A\-M\-A\-G\-E\-S (I\-N\-C\-L\-U\-D\-I\-N\-G, B\-U\-T N\-O\-T L\-I\-M\-I\-T\-E\-D T\-O, P\-R\-O\-C\-U\-R\-E\-M\-E\-N\-T O\-F S\-U\-B\-S\-T\-I\-T\-U\-T\-E G\-O\-O\-D\-S O\-R S\-E\-R\-V\-I\-C\-E\-S; L\-O\-S\-S O\-F U\-S\-E, D\-A\-T\-A, O\-R P\-R\-O\-F\-I\-T\-S; O\-R B\-U\-S\-I\-N\-E\-S\-S I\-N\-T\-E\-R\-R\-U\-P\-T\-I\-O\-N) H\-O\-W\-E\-V\-E\-R C\-A\-U\-S\-E\-D A\-N\-D O\-N A\-N\-Y T\-H\-E\-O\-R\-Y O\-F L\-I\-A\-B\-I\-L\-I\-T\-Y, W\-H\-E\-T\-H\-E\-R I\-N C\-O\-N\-T\-R\-A\-C\-T, S\-T\-R\-I\-C\-T L\-I\-A\-B\-I\-L\-I\-T\-Y, O\-R T\-O\-R\-T (I\-N\-C\-L\-U\-D\-I\-N\-G N\-E\-G\-L\-I\-G\-E\-N\-C\-E O\-R O\-T\-H\-E\-R\-W\-I\-S\-E) A\-R\-I\-S\-I\-N\-G I\-N A\-N\-Y W\-A\-Y O\-U\-T O\-F T\-H\-E U\-S\-E O\-F T\-H\-I\-S S\-O\-F\-T\-W\-A\-R\-E, E\-V\-E\-N I\-F A\-D\-V\-I\-S\-E\-D O\-F T\-H\-E P\-O\-S\-S\-I\-B\-I\-L\-I\-T\-Y O\-F S\-U\-C\-H D\-A\-M\-A\-G\-E.  

\subsection{Function Documentation}
\hypertarget{linemap_8h_a2769d238eadf5f84f6d0355e5833bee7}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-add\-\_\-source@{yasm\-\_\-linemap\-\_\-add\-\_\-source}}
\index{yasm\-\_\-linemap\-\_\-add\-\_\-source@{yasm\-\_\-linemap\-\_\-add\-\_\-source}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-add\-\_\-source}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L void yasm\-\_\-linemap\-\_\-add\-\_\-source (
\begin{DoxyParamCaption}
\item[{{\bf yasm\-\_\-linemap} $\ast$}]{linemap, }
\item[{{\bf yasm\-\_\-bytecode} $\ast$}]{bc, }
\item[{const char $\ast$}]{source}
\end{DoxyParamCaption}
)}}\label{linemap_8h_a2769d238eadf5f84f6d0355e5833bee7}
Add bytecode and source line information to the current virtual line. \begin{DoxyAttention}{Attention}
Deletes any existing bytecode and source line information for the current virtual line. 
\end{DoxyAttention}

\begin{DoxyParams}{Parameters}
{\em linemap} & line mapping repository \\
\hline
{\em bc} & bytecode (if any) \\
\hline
{\em source} & source code line \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
The source code line pointer is N\-O\-T kept, it is strdup'ed. 
\end{DoxyNote}
\hypertarget{linemap_8h_a9b2d9e6a8d03e0aed107d7bcc1cd930d}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-create@{yasm\-\_\-linemap\-\_\-create}}
\index{yasm\-\_\-linemap\-\_\-create@{yasm\-\_\-linemap\-\_\-create}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-create}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L {\bf yasm\-\_\-linemap}$\ast$ yasm\-\_\-linemap\-\_\-create (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{linemap_8h_a9b2d9e6a8d03e0aed107d7bcc1cd930d}
Create a new line mapping repository. \begin{DoxyReturn}{Returns}
New repository. 
\end{DoxyReturn}
\hypertarget{linemap_8h_a60caf1c26ffcf941a30d63eb33f6a2a1}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-destroy@{yasm\-\_\-linemap\-\_\-destroy}}
\index{yasm\-\_\-linemap\-\_\-destroy@{yasm\-\_\-linemap\-\_\-destroy}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-destroy}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L void yasm\-\_\-linemap\-\_\-destroy (
\begin{DoxyParamCaption}
\item[{{\bf yasm\-\_\-linemap} $\ast$}]{linemap}
\end{DoxyParamCaption}
)}}\label{linemap_8h_a60caf1c26ffcf941a30d63eb33f6a2a1}
Clean up any memory allocated for a repository. 
\begin{DoxyParams}{Parameters}
{\em linemap} & line mapping repository \\
\hline
\end{DoxyParams}
\hypertarget{linemap_8h_a9cbd772abcbe017d7425bd50098be3f6}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-get\-\_\-current@{yasm\-\_\-linemap\-\_\-get\-\_\-current}}
\index{yasm\-\_\-linemap\-\_\-get\-\_\-current@{yasm\-\_\-linemap\-\_\-get\-\_\-current}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-get\-\_\-current}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L unsigned long yasm\-\_\-linemap\-\_\-get\-\_\-current (
\begin{DoxyParamCaption}
\item[{{\bf yasm\-\_\-linemap} $\ast$}]{linemap}
\end{DoxyParamCaption}
)}}\label{linemap_8h_a9cbd772abcbe017d7425bd50098be3f6}
Get the current line position in a repository. 
\begin{DoxyParams}{Parameters}
{\em linemap} & line mapping repository \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Current virtual line. 
\end{DoxyReturn}
\hypertarget{linemap_8h_a97a4f3e1d3d2163b46df54431d03bc48}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-get\-\_\-source@{yasm\-\_\-linemap\-\_\-get\-\_\-source}}
\index{yasm\-\_\-linemap\-\_\-get\-\_\-source@{yasm\-\_\-linemap\-\_\-get\-\_\-source}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-get\-\_\-source}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L int yasm\-\_\-linemap\-\_\-get\-\_\-source (
\begin{DoxyParamCaption}
\item[{{\bf yasm\-\_\-linemap} $\ast$}]{linemap, }
\item[{unsigned long}]{line, }
\item[{{\bf yasm\-\_\-bytecode} $\ast$$\ast$}]{bcp, }
\item[{const char $\ast$$\ast$}]{sourcep}
\end{DoxyParamCaption}
)}}\label{linemap_8h_a97a4f3e1d3d2163b46df54431d03bc48}
Get bytecode and source line information, if any, for a virtual line. 
\begin{DoxyParams}{Parameters}
{\em linemap} & line mapping repository \\
\hline
{\em line} & virtual line \\
\hline
{\em bcp} & pointer to return bytecode into \\
\hline
{\em sourcep} & pointer to return source code line pointer into \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero if source line information available for line, nonzero if not. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
If source line information is not available, bcp and sourcep targets are set to N\-U\-L\-L. 
\end{DoxyNote}
\hypertarget{linemap_8h_ac05b99123984059ba161394e966d5161}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-goto\-\_\-next@{yasm\-\_\-linemap\-\_\-goto\-\_\-next}}
\index{yasm\-\_\-linemap\-\_\-goto\-\_\-next@{yasm\-\_\-linemap\-\_\-goto\-\_\-next}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-goto\-\_\-next}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L unsigned long yasm\-\_\-linemap\-\_\-goto\-\_\-next (
\begin{DoxyParamCaption}
\item[{{\bf yasm\-\_\-linemap} $\ast$}]{linemap}
\end{DoxyParamCaption}
)}}\label{linemap_8h_ac05b99123984059ba161394e966d5161}
Go to the next line (increments the current virtual line). 
\begin{DoxyParams}{Parameters}
{\em linemap} & line mapping repository \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The current (new) virtual line. 
\end{DoxyReturn}
\hypertarget{linemap_8h_ace26c1c3b7675376c8420393c84aa697}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-lookup@{yasm\-\_\-linemap\-\_\-lookup}}
\index{yasm\-\_\-linemap\-\_\-lookup@{yasm\-\_\-linemap\-\_\-lookup}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-lookup}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L void yasm\-\_\-linemap\-\_\-lookup (
\begin{DoxyParamCaption}
\item[{{\bf yasm\-\_\-linemap} $\ast$}]{linemap, }
\item[{unsigned long}]{line, }
\item[{const char $\ast$$\ast$}]{filename, }
\item[{unsigned long $\ast$}]{file\-\_\-line}
\end{DoxyParamCaption}
)}}\label{linemap_8h_ace26c1c3b7675376c8420393c84aa697}
Look up the associated physical file and line for a virtual line. 
\begin{DoxyParams}{Parameters}
{\em linemap} & line mapping repository \\
\hline
{\em line} & virtual line \\
\hline
{\em filename} & physical file name (output) \\
\hline
{\em file\-\_\-line} & physical line number (output) \\
\hline
\end{DoxyParams}
\hypertarget{linemap_8h_a55692e3a90e56160ea5a8d08c3d015f7}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-poke@{yasm\-\_\-linemap\-\_\-poke}}
\index{yasm\-\_\-linemap\-\_\-poke@{yasm\-\_\-linemap\-\_\-poke}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-poke}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L unsigned long yasm\-\_\-linemap\-\_\-poke (
\begin{DoxyParamCaption}
\item[{{\bf yasm\-\_\-linemap} $\ast$}]{linemap, }
\item[{const char $\ast$}]{filename, }
\item[{unsigned long}]{file\-\_\-line}
\end{DoxyParamCaption}
)}}\label{linemap_8h_a55692e3a90e56160ea5a8d08c3d015f7}
Poke a single file/line association, restoring the original physical association starting point. Caution\-: increments the current virtual line twice. 
\begin{DoxyParams}{Parameters}
{\em linemap} & line mapping repository \\
\hline
{\em filename} & physical file name (if N\-U\-L\-L, not changed) \\
\hline
{\em file\-\_\-line} & physical line number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The virtual line number of the poked association. 
\end{DoxyReturn}
\hypertarget{linemap_8h_a03b28dbe9e97b4c19e2a75d83eb64852}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-set@{yasm\-\_\-linemap\-\_\-set}}
\index{yasm\-\_\-linemap\-\_\-set@{yasm\-\_\-linemap\-\_\-set}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-set}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L void yasm\-\_\-linemap\-\_\-set (
\begin{DoxyParamCaption}
\item[{{\bf yasm\-\_\-linemap} $\ast$}]{linemap, }
\item[{const char $\ast$}]{filename, }
\item[{unsigned long}]{virtual\-\_\-line, }
\item[{unsigned long}]{file\-\_\-line, }
\item[{unsigned long}]{line\-\_\-inc}
\end{DoxyParamCaption}
)}}\label{linemap_8h_a03b28dbe9e97b4c19e2a75d83eb64852}
Set a new file/line physical association starting point at the specified virtual line. line\-\_\-inc indicates how much the \char`\"{}real\char`\"{} line is incremented by for each virtual line increment (0 is perfectly legal). 
\begin{DoxyParams}{Parameters}
{\em linemap} & line mapping repository \\
\hline
{\em filename} & physical file name (if N\-U\-L\-L, not changed) \\
\hline
{\em virtual\-\_\-line} & virtual line number (if 0, linemap-\/$>$current is used) \\
\hline
{\em file\-\_\-line} & physical line number \\
\hline
{\em line\-\_\-inc} & line increment \\
\hline
\end{DoxyParams}
\hypertarget{linemap_8h_af626dd51998e21fd4b7e8b057f0c8ee5}{\index{linemap.\-h@{linemap.\-h}!yasm\-\_\-linemap\-\_\-traverse\-\_\-filenames@{yasm\-\_\-linemap\-\_\-traverse\-\_\-filenames}}
\index{yasm\-\_\-linemap\-\_\-traverse\-\_\-filenames@{yasm\-\_\-linemap\-\_\-traverse\-\_\-filenames}!linemap.h@{linemap.\-h}}
\subsubsection[{yasm\-\_\-linemap\-\_\-traverse\-\_\-filenames}]{\setlength{\rightskip}{0pt plus 5cm}Y\-A\-S\-M\-\_\-\-L\-I\-B\-\_\-\-D\-E\-C\-L int yasm\-\_\-linemap\-\_\-traverse\-\_\-filenames (
\begin{DoxyParamCaption}
\item[{{\bf yasm\-\_\-linemap} $\ast$}]{linemap, }
\item[{void $\ast$}]{d, }
\item[{int($\ast$)(const char $\ast$filename, void $\ast$d)}]{func}
\end{DoxyParamCaption}
)}}\label{linemap_8h_af626dd51998e21fd4b7e8b057f0c8ee5}
Traverses all filenames used in a linemap, calling a function on each filename. 
\begin{DoxyParams}{Parameters}
{\em linemap} & line mapping repository \\
\hline
{\em d} & data pointer passed to func on each call \\
\hline
{\em func} & function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Stops early (and returns func's return value) if func returns a nonzero value; otherwise 0. 
\end{DoxyReturn}
